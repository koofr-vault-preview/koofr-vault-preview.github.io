import{r as a,a as d,j as r}from"./DynamicThemeProvider-CxehgrR0.js";import{c,e as b}from"./emotion-css.esm-CiHGz3gB.js";import{D as g}from"./DashboardError-4HvOmJma.js";import{D as k}from"./DashboardLayout-B-9EOOK5.js";import{D as x}from"./DashboardLoading-BsQeCbg9.js";import{N as C}from"./DashboardNavbar-Ckwc2FKx.js";import{u as j}from"./useDocumentTitle-D3L4F_h2.js";import{a as B,u as m}from"./mainWebAuthenticated-D1LdefYU.js";import{R}from"./RepoConfigInfo-Btv7GF_R.js";import{R as h}from"./RepoUnlockForm-DDTt2TgM.js";import"./error-icon@2x-BzFHMFnI.js";import"./Button-Dt6jELX4.js";import"./GitRevision-ClhB6tiZ.js";import"./index-BcIOPcia.js";import"./Navbar-D0t0rxK0.js";import"./NavbarSticky-DuO2swp8.js";import"./PasswordInput-CwspR86a.js";const D=a.memo(({repo:e})=>{const o=e.id,t=d(),s=B();let i=a.useMemo(()=>s.repoConfigBackupCreate(o),[s,o]);a.useEffect(()=>()=>{s.repoConfigBackupDestroy(i)},[s,i]);const[p]=m((n,l)=>n.repoConfigBackupInfoSubscribe(i,l),n=>n.repoConfigBackupInfoData,[i]),u=a.useCallback(n=>{s.repoConfigBackupGenerate(i,n)},[s,i]),f=a.useMemo(()=>[{id:e.id,name:e.name,link:`/repos/${e.id}`,isClickable:!0,hasCaret:!1,isLast:!1},{id:"configbackup",name:"Backup config",isClickable:!1,hasCaret:!1,isLast:!0}],[e]);return j("Backup config"),r.jsx(k,{navbarHeader:r.jsx(C,{breadcrumbs:f}),children:p!==void 0?p.config===void 0?r.jsx(h,{info:p.unlockInfo,onUnlock:u}):r.jsxs("div",{className:t?c`
                    padding: 0 15px;
                  `:void 0,children:[r.jsx("h1",{className:c`
                font-size: 32px;
                font-weight: normal;
                margin: 0 0 20px;
              `,children:"Backup config"}),r.jsx(R,{config:p.config})]}):null})}),v=a.memo(({repoId:e})=>{const[o]=m((t,s)=>t.reposRepoSubscribe(e,s),t=>t.reposRepoData,[e]);return(o==null?void 0:o.status.type)==="Error"?r.jsx(g,{error:o.status.error}):(o==null?void 0:o.repo)!==void 0?r.jsx(D,{repo:o.repo}):r.jsx(x,{})}),$=a.memo(()=>{const o=b().repoId;return o===void 0?null:r.jsx(v,{repoId:o},o)});export{$ as RepoConfigBackupPage};
