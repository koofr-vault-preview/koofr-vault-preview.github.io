import{r as n,j as p,g as M,u as R,c as g}from"./DynamicThemeProvider-CxehgrR0.js";import{D as H}from"./DashboardError-BIlklx0l.js";import{D as U}from"./DashboardLoading-CeavatL0.js";import{a as E,u as A,s as C}from"./mainWebAuthenticated-BUokeWIF.js";import{D as B}from"./DashboardLayout-y1QZPwdG.js";import{u as K}from"./DashboardNavbar-Chjsjb8Z.js";import{u as N}from"./useDocumentTitle-D3L4F_h2.js";import{R as O}from"./RepoUnlockForm-CV4H2IXx.js";import{f as $}from"./index-CrWxlqLP.js";import{a as y,c as h}from"./emotion-css.esm-CiHGz3gB.js";import{n as P,b as W,e as z}from"./Button-Dt6jELX4.js";const he=(e,o,a)=>{const t=new URLSearchParams;return o!==void 0&&t.set("path",o),a!==void 0&&t.set("name",a),{pathname:`/repos/${e}`,search:t.toString()}},we=(e,o,a,t)=>{const i=new URLSearchParams({path:o});return a&&i.set("editing","true"),t!==void 0&&i.set("autosave",`${t}`),{pathname:`/repos/${e}/details`,search:i.toString()}},G=e=>e==="pdf",j=e=>e==="Text"||e==="Code",_=e=>e==="jpg"||e==="jpeg"||e==="gif"||e==="png"||e==="svg",ge=e=>e.nameError===void 0&&(G(e.ext)||j(e.category)||_(e.ext)),q=e=>j(e),Ee=e=>e.nameError===void 0&&q(e.category),X=n.memo(({repoId:e})=>{const o=E();let a=n.useMemo(()=>o.repoUnlockCreate(e,{mode:"Unlock"}),[o,e]);n.useEffect(()=>()=>{o.repoUnlockDestroy(a)},[o,a]);const[t]=A((m,v)=>m.repoUnlockInfoSubscribe(a,v),m=>m.repoUnlockInfoData,[a]),i=n.useCallback(m=>{o.repoUnlockUnlock(a,m)},[o,a]),r=K((t==null?void 0:t.repoName)??"");return N(t==null?void 0:t.repoName),t===void 0?null:p.jsx(B,{navbarHeader:r,children:t!==void 0?p.jsx(O,{info:t,onUnlock:i}):null})});var L={exports:{}};(function(e,o){function a(f){if(f&&typeof f=="object"){var l=f.which||f.keyCode||f.charCode;l&&(f=l)}if(typeof f=="number")return m[f];var s=String(f),d=t[s.toLowerCase()];if(d)return d;var d=i[s.toLowerCase()];if(d)return d;if(s.length===1)return s.charCodeAt(0)}a.isEventKey=function(l,s){if(l&&typeof l=="object"){var d=l.which||l.keyCode||l.charCode;if(d==null)return!1;if(typeof s=="string"){var c=t[s.toLowerCase()];if(c)return c===d;var c=i[s.toLowerCase()];if(c)return c===d}else if(typeof s=="number")return s===d;return!1}},o=e.exports=a;var t=o.code=o.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=o.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(r=97;r<123;r++)t[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)t[r-48]=r;for(r=1;r<13;r++)t["f"+r]=r+111;for(r=0;r<10;r++)t["numpad "+r]=r+96;var m=o.names=o.title={};for(r in t)m[t[r]]=r;for(var v in i)t[v]=i[v]})(L,L.exports);var J=L.exports;const Q=M(J);function Y(e,o,{altKey:a=!1,ctrlKey:t=!1,metaKey:i=!1,shiftKey:r=!1}){return Q.isEventKey(e,o)&&e.altKey===a&&e.ctrlKey===t&&e.metaKey===i&&e.shiftKey===r}function I(e){const o=E();n.useEffect(()=>{const a=t=>{Y(t,"l",{altKey:!0,shiftKey:!0})&&(t.preventDefault(),o.reposLockRepo(e))};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[o,e])}const S=1e3;function ee(e){const o=E(),a=n.useCallback(()=>{o.reposTouchRepo(e)},[o,e]),t=n.useMemo(()=>{let i=0,r;return function(){const m=new Date().getTime();clearTimeout(r),m-i>=S?(a(),i=m):r=setTimeout(()=>{a(),i=m},S)}},[a]);n.useEffect(()=>(window.addEventListener("mousemove",t),window.addEventListener("mousedown",t),window.addEventListener("keydown",t),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mousedown",t),window.removeEventListener("keydown",t)}),[t]),n.useEffect(()=>{a()},[a])}const te=n.memo(({repoId:e,children:o})=>(I(e),ee(e),o)),ye=n.memo(({repoId:e,repoStatus:o,isLocked:a,children:t})=>{const i=E();return o.type==="Initial"||o.type==="Loading"&&!o.loaded?p.jsx(U,{}):o.type==="Error"?p.jsx(H,{error:o.error,onRetry:()=>{i.load()}}):a?p.jsx(X,{repoId:e},e):p.jsx(te,{repoId:e,children:t})}),be=n.memo(({value:e,noTooltip:o})=>{const a=E(),[t,i]=n.useState(()=>a.relativeTime(Math.min(e,Date.now()),!0)),r=t.nextUpdate;return n.useEffect(()=>{if(r!==void 0){const m=setTimeout(()=>{i(a.relativeTime(Math.min(e,Date.now()),!0))},Math.max(r-Date.now(),0));return()=>{clearTimeout(m)}}},[a,e,r]),p.jsx("span",{title:o?void 0:$(e,"PPPPpp"),children:t.display})}),xe=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},n.createElement("g",{fill:"#263238"},n.createElement("path",{fillRule:"evenodd",d:"m11.212 3.076 2.79 2.583h-2.79V3.076ZM5.526 15.98H2.903V2.056h6.854v5.065h6.803v-.53a1.46 1.46 0 0 0-.41-.938L11.094.973a1.643 1.643 0 0 0-.969-.379H1.999a.559.559 0 0 0-.56.559v15.73a.56.56 0 0 0 .56.559h3.527v-1.463Z",clipRule:"evenodd"}),n.createElement("path",{d:"M13.954 9.476 8.73 14.698a1.093 1.093 0 0 0-.164.326l-.109.763.762-.11a1.107 1.107 0 0 0 .327-.163l5.222-5.222-.816-.816Zm2.409.34a.672.672 0 0 1 0 .951l-5.787 5.787c-.263.262-.773.518-1.14.57l-2.037.293c-.368.052-.623-.203-.57-.57l.292-2.037c.053-.367.308-.878.57-1.14l5.787-5.787a.672.672 0 0 1 .95 0l1.935 1.934Z"}),n.createElement("path",{d:"m7.624 13.93 2.773 2.785 1.036-1.033-2.773-2.784-1.036 1.032Zm3.924-3.996 2.773 2.785 1.036-1.032-2.773-2.785-1.036 1.032Z"}))),Le=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},n.createElement("g",{fill:"#676F73"},n.createElement("path",{fillRule:"evenodd",d:"m11.212 3.076 2.79 2.583h-2.79V3.076ZM5.526 15.98H2.903V2.056h6.854v5.065h6.803v-.53a1.46 1.46 0 0 0-.41-.938L11.094.973a1.643 1.643 0 0 0-.969-.379H1.999a.559.559 0 0 0-.56.559v15.73a.56.56 0 0 0 .56.559h3.527v-1.463Z",clipRule:"evenodd"}),n.createElement("path",{d:"M13.954 9.476 8.73 14.698a1.093 1.093 0 0 0-.164.326l-.109.763.762-.11a1.107 1.107 0 0 0 .327-.163l5.222-5.222-.816-.816Zm2.409.34a.672.672 0 0 1 0 .951l-5.787 5.787c-.263.262-.773.518-1.14.57l-2.037.293c-.368.052-.623-.203-.57-.57l.292-2.037c.053-.367.308-.878.57-1.14l5.787-5.787a.672.672 0 0 1 .95 0l1.935 1.934Z"}),n.createElement("path",{d:"m7.624 13.93 2.773 2.785 1.036-1.033-2.773-2.784-1.036 1.032Zm3.924-3.996 2.773 2.785 1.036-1.032-2.773-2.785-1.036 1.032Z"}))),Ze=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},n.createElement("g",{fill:"#263238"},n.createElement("path",{d:"m12.742 2.55-1.819 1.82-7.513 7.513c-.211.21-.489.766-.53 1.06l-.353 2.538 2.527-.363c.295-.042.85-.32 1.06-.53l9.336-9.336-2.708-2.701Zm3.983 1.923a1.112 1.112 0 0 1 0 1.572l-9.577 9.577c-.434.434-1.278.857-1.886.944l-3.371.483c-.608.088-1.03-.334-.943-.942l.484-3.371c.087-.608.51-1.453.944-1.887l7.513-7.514 2.063-2.063a1.112 1.112 0 0 1 1.573 0l3.2 3.2Z"}),n.createElement("path",{d:"M5.501 15.86 2.66 13.017l-.517-.517 1.034-1.034.517.517 2.931 2.931-1.123.946Zm8.696-8.225L11.371 4.81l-.517-.517 1.034-1.034.517.517 2.786 2.785-.994 1.075Z"}))),ke=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},n.createElement("g",{fill:"#676F73"},n.createElement("path",{d:"m12.742 2.55-1.819 1.82-7.513 7.513c-.211.21-.489.766-.53 1.06l-.353 2.538 2.527-.363c.295-.042.85-.32 1.06-.53l9.336-9.336-2.708-2.701Zm3.983 1.923a1.112 1.112 0 0 1 0 1.572l-9.577 9.577c-.434.434-1.278.857-1.886.944l-3.371.483c-.608.088-1.03-.334-.943-.942l.483-3.371c.088-.608.51-1.453.944-1.887L9.89 3.335l2.063-2.063a1.112 1.112 0 0 1 1.573 0l3.2 3.2Z"}),n.createElement("path",{d:"M5.501 15.86 2.66 13.017l-.517-.517 1.034-1.034.517.517 2.931 2.931-1.123.946Zm8.696-8.225L11.37 4.81l-.517-.517 1.034-1.034.517.517 2.786 2.785-.994 1.075Z"}))),Se=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},n.createElement("path",{fill:"#263238",d:"m10.1 2.029.042.035a.547.547 0 0 0-.08-.03.466.466 0 0 0 .063.005H2.902V15.96h12.195V6.573c0 .028.002.052.005.071a.31.31 0 0 0 .055.065L10.1 2.029Zm6.05 3.606c.226.21.41.63.41.938v10.292c0 .309-.25.559-.559.559H2a.559.559 0 0 1-.56-.559V1.135A.56.56 0 0 1 2 .576h8.126c.308 0 .742.17.969.38l5.056 4.68Z"}),n.createElement("path",{fill:"#263238",d:"M9.757 1.714v5.39h6.246V5.64l-4.79.001V1.707l-1.456.007Z"}),n.createElement("path",{fill:"#DF533E",d:"M7.422 9.516a.731.731 0 0 0-1.034 1.034l4.194 4.194a.731.731 0 1 0 1.034-1.034L7.422 9.516Z"}),n.createElement("path",{fill:"#DF533E",d:"M6.388 13.71a.731.731 0 1 0 1.034 1.034l4.194-4.194a.731.731 0 1 0-1.034-1.034L6.388 13.71Z"})),Re=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},n.createElement("g",{fill:"#676F73"},n.createElement("path",{d:"m10.1 2.029.042.035a.547.547 0 0 0-.08-.03.466.466 0 0 0 .063.005H2.902V15.96h12.195V6.573c0 .028.002.052.005.071a.31.31 0 0 0 .055.065L10.1 2.029Zm6.05 3.606c.226.21.41.63.41.938v10.292c0 .309-.25.559-.559.559H2a.559.559 0 0 1-.56-.559V1.135A.56.56 0 0 1 2 .576h8.126c.308 0 .742.17.969.38l5.056 4.68Z"}),n.createElement("path",{d:"M9.757 1.714v5.39h6.246V5.64l-4.79.001V1.707l-1.456.007ZM7.422 9.516a.731.731 0 1 0-1.034 1.034l4.194 4.194a.731.731 0 0 0 1.034-1.034L7.422 9.516Z"}),n.createElement("path",{d:"M6.388 13.71a.731.731 0 1 0 1.034 1.034l4.194-4.194a.731.731 0 1 0-1.034-1.034L6.388 13.71Z"}))),je=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},n.createElement("path",{fill:"#263238",d:"m10.1 2.029.042.035a.547.547 0 0 0-.08-.03.466.466 0 0 0 .063.005H2.902V15.96h12.195V6.573c0 .028.002.052.005.071a.31.31 0 0 0 .055.065L10.1 2.029Zm6.05 3.606c.226.21.41.63.41.938v10.292c0 .309-.25.559-.559.559H2a.559.559 0 0 1-.56-.559V1.135A.56.56 0 0 1 2 .576h8.126c.308 0 .742.17.969.38l5.056 4.68Z"}),n.createElement("path",{fill:"#263238",d:"M9.757 1.714v5.39h6.246V5.64h-4.79V1.707l-1.456.007Z"}),n.createElement("path",{fill:"#71BA05",d:"M8.278 14.113a.731.731 0 1 0 1.462 0V9.558a.731.731 0 1 0-1.462 0v4.555Z"}),n.createElement("path",{fill:"#71BA05",d:"m8.994 13.629 2.056-2.057a.731.731 0 0 1 1.034 1.034L9.51 15.18l-.517.517-.517-.517-2.574-2.574a.731.731 0 0 1 1.034-1.034l2.058 2.057Z"})),Te=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:18,height:18,fill:"none",...e},n.createElement("g",{fill:"#676F73"},n.createElement("path",{d:"m10.1 2.029.042.035a.547.547 0 0 0-.08-.03.466.466 0 0 0 .063.005H2.902V15.96h12.195V6.573c0 .028.002.052.005.071a.31.31 0 0 0 .055.065L10.1 2.029Zm6.05 3.606c.226.21.41.63.41.938v10.292c0 .309-.25.559-.559.559H2a.559.559 0 0 1-.56-.559V1.135A.56.56 0 0 1 2 .576h8.126c.308 0 .742.17.969.38l5.056 4.68Z"}),n.createElement("path",{d:"M9.757 1.714v5.39h6.246V5.64h-4.79V1.707l-1.456.007ZM8.278 14.113a.731.731 0 1 0 1.462 0V9.558a.731.731 0 1 0-1.462 0v4.555Z"}),n.createElement("path",{d:"m8.994 13.629 2.056-2.057a.731.731 0 0 1 1.034 1.034L9.51 15.18l-.517.517-.517-.517-2.574-2.574a.731.731 0 0 1 1.034-1.034l2.058 2.057Z"}))),Ve=P.nav`
  display: flex;
  align-items: center;
  margin: 0 -12px 0 auto;
`;function oe({as:e,icon:o,iconHover:a,className:t,textClassName:i,children:r,...m}){const v=e||z,f=R();return p.jsx(v,{className:y(h`
          ${W}
          margin: 0 4px 0 12px;
          padding: 0 8px 0 0;
          text-align: left;

          &[disabled] {
            cursor: not-allowed;
            pointer-events: none;
            opacity: 0.7;
          }
        `,t),...m,children:p.jsxs("div",{className:h`
          display: flex;
          align-items: center;
        `,children:[o!==void 0?p.jsx("div",{className:y(h`
                display: flex;
                justify-content: center;
                align-items: center;
                width: 32px;
                height: 32px;
              `,a!==void 0&&h`
                  *:hover > * > & {
                    display: none;
                  }
                `),children:o}):null,a!==void 0?p.jsx("div",{className:h`
              display: none;
              justify-content: center;
              align-items: center;
              width: 32px;
              height: 32px;

              *:hover > * > & {
                display: flex;
              }
            `,children:a}):null,p.jsx("div",{className:y(h`
              font-size: 13px;
              font-weight: 600;
              color: ${f.colors.text};
            `,i),children:r})]})})}const De=n.memo(({textClassName:e,...o})=>{const a=R();return p.jsx(oe,{textClassName:y(h`
            color: ${a.colors.destructive};
          `,e),...o,children:"Cancel"})});var T={exports:{}};(function(e,o){(function(a,t){t()})(g,function(){function a(l,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function t(l,s,d){var c=new XMLHttpRequest;c.open("GET",l),c.responseType="blob",c.onload=function(){f(c.response,s,d)},c.onerror=function(){console.error("could not download file")},c.send()}function i(l){var s=new XMLHttpRequest;s.open("HEAD",l,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function r(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(s)}}var m=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof g=="object"&&g.global===g?g:void 0,v=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=m.saveAs||(typeof window!="object"||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!v?function(l,s,d){var c=m.URL||m.webkitURL,u=document.createElement("a");s=s||l.name||"download",u.download=s,u.rel="noopener",typeof l=="string"?(u.href=l,u.origin===location.origin?r(u):i(u.href)?t(l,s,d):r(u,u.target="_blank")):(u.href=c.createObjectURL(l),setTimeout(function(){c.revokeObjectURL(u.href)},4e4),setTimeout(function(){r(u)},0))}:"msSaveOrOpenBlob"in navigator?function(l,s,d){if(s=s||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(a(l,d),s);else if(i(l))t(l,s,d);else{var c=document.createElement("a");c.href=l,c.target="_blank",setTimeout(function(){r(c)})}}:function(l,s,d,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof l=="string")return t(l,s,d);var u=l.type==="application/octet-stream",F=/constructor/i.test(m.HTMLElement)||m.safari,Z=/CriOS\/[\d]+/.test(navigator.userAgent);if((Z||u&&F||v)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var w=b.result;w=Z?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=w:location=w,c=null},b.readAsDataURL(l)}else{var k=m.URL||m.webkitURL,x=k.createObjectURL(l);c?c.location=x:location.href=x,c=null,setTimeout(function(){k.revokeObjectURL(x)},4e4)}});m.saveAs=f.saveAs=f,e.exports=f})})(T);var ne=T.exports;function V(e){if(e.stream!==void 0){const o=e.size.type==="Exact"?parseInt(e.size.size,10):void 0,a=C.createWriteStream(e.name,{size:o});e.stream.pipeTo(a).catch(()=>{})}else e.blob!==void 0&&ne.saveAs(e.blob,e.name)}const D=async(e,o,a,t)=>{const i=t,r=await e.repoFilesGetFileStream(o,a,i);r!==void 0&&V(r)},ae=async(e,o,a)=>{const t=a,i=await e.repoFilesBrowsersGetSelectedStream(o,t);i!==void 0&&V(i)},Fe=async(e,o,a,t)=>{D(e,o,a,t)},Me=async(e,o,a,t)=>{D(e,o,a,t)},He=async(e,o,a)=>{ae(e,o,a)},Ue=navigator.userAgentData!=null?navigator.userAgentData.platform==="macOS":navigator.platform.indexOf("Mac")!==-1;export{ye as R,be as S,oe as T,j as a,_ as b,ke as c,Ze as d,q as e,G as f,Le as g,xe as h,Te as i,je as j,Me as k,Re as l,Se as m,he as n,Ue as o,Y as p,Fe as q,we as r,ge as s,Ve as t,He as u,Ee as v,De as w};
